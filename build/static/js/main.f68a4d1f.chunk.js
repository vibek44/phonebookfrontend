(this.webpackJsonpphonebookfrontend=this.webpackJsonpphonebookfrontend||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(15),r=n.n(a),o=n(1),s=n(4),u=n(0),i=function(e){var t=e.value,n=e.handleFiltered;return Object(u.jsxs)("div",{className:"search-container",children:["search contact: ",Object(u.jsx)("input",{value:t,onChange:n})]})},l=function(e){return Object(u.jsx)("form",{className:"contactform-container",onSubmit:e.addPerson,children:Object(u.jsxs)("fieldset",{children:[Object(u.jsx)("legend",{children:"Add contact"}),Object(u.jsxs)("div",{children:["Name:",Object(u.jsx)("input",{value:e.valuename,onChange:e.handleNameChange})]}),Object(u.jsxs)("div",{children:["Number:",Object(u.jsx)("input",{type:"number",value:e.valuenumber,onChange:e.handleNumberChange})]}),Object(u.jsx)("button",{type:"submit",children:"add"})]})})},j=function(e){var t=e.person,n=e.handleRemove;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsxs)("td",{children:[t.number,"  ",Object(u.jsx)("button",{onClick:n,children:"delete"})]})]})},b=function(e){var t=e.filteredContact,n=e.handleRemove;return Object(u.jsxs)("table",{children:[Object(u.jsx)("caption",{children:"Contact list"}),Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:" Name"}),Object(u.jsx)("th",{children:"Phone no"})]}),t.map((function(e){return Object(u.jsx)(j,{person:e,handleRemove:function(){return n(e.id,e.name)}},e.id)}))]})]})},d=n(5),m=n.n(d),h="/api/persons",O={getAll:function(){return m.a.get(h).then((function(e){return e.data}))},create:function(e){return m.a.post(h,e).then((function(e){return e.data}))},remove:function(e){return m.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return m.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},f=function(e){var t=e.notification;return null===t.message&&null===t.errormessage?null:t.message?Object(u.jsx)("p",{className:"notification",children:t.message}):Object(u.jsx)("p",{className:"error",children:t.errormessage})},g=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),j=Object(s.a)(r,2),d=j[0],m=j[1],h=Object(c.useState)(""),g=Object(s.a)(h,2),v=g[0],p=g[1],x=Object(c.useState)(""),C=Object(s.a)(x,2),N=C[0],w=C[1],k=Object(c.useState)({message:null,errormessage:null}),R=Object(s.a)(k,2),S=R[0],y=R[1],P=n.filter((function(e){return e.name.toUpperCase().includes(N.toUpperCase())}));Object(c.useEffect)((function(){O.getAll().then((function(e){return a(e)}))}),[]);return Object(u.jsxs)("div",{className:"main-container",children:[Object(u.jsx)("h1",{children:"Phonebook"}),(S.message||S.errormessage)&&Object(u.jsx)(f,{notification:S}),Object(u.jsx)(i,{value:N,handleFiltered:function(e){return w(e.target.value)}}),Object(u.jsx)(l,{addPerson:function(e){if(e.preventDefault(),d&&v){var t=n.find((function(e){return e.name.toLowerCase()===d.trim().toLowerCase()}));if(t){alert("".concat(d," is already added to phonebook,Replace old number with new"));var c=Object(o.a)(Object(o.a)({},t),{},{number:v});O.update(t.id,c).then((function(e){a(n.map((function(n){return t.id!==n.id?n:e}))),m(""),p(""),y(Object(o.a)(Object(o.a)({},S),{},{message:"changed number from ".concat(t.number," to ").concat(e.number)})),setTimeout((function(){y(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),5e3)})).catch((function(e){y(Object(o.a)(Object(o.a)({},S),{},{errormessage:"Information of ".concat(d," has been removed")}))}))}else{var r={name:d,number:v};O.create(r).then((function(e){a(n.concat(e)),y(Object(o.a)(Object(o.a)({},S),{},{message:"".concat(e.name," added.")})),m(""),p(""),setTimeout((function(){y(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),5e3)}))}}else y(Object(o.a)(Object(o.a)({},S),{},{errormessage:"name or number is missing"})),setTimeout((function(){y(Object(o.a)(Object(o.a)({},S),{},{errormessage:null}))}),5e3)},valuename:d,valuenumber:v,handleNameChange:function(e){return m(e.target.value)},handleNumberChange:function(e){return p(e.target.value)}}),P.length>0?Object(u.jsx)(b,{filteredContact:P,handleRemove:function(e,t){window.confirm("Delete ".concat(t," ?")),O.remove(e),y(Object(o.a)(Object(o.a)({},S),{},{message:"Removed ".concat(t)})),setTimeout((function(){y(Object(o.a)(Object(o.a)({},S),{},{message:null}))}),3e3),a(n.filter((function(t){return e!==t.id})))}}):Object(u.jsx)("p",{className:"no_contact",children:"No contacts found."})]})};n(39);r.a.render(Object(u.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f68a4d1f.chunk.js.map